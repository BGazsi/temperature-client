(this["webpackJsonptemperature-client"]=this["webpackJsonptemperature-client"]||[]).push([[0],{39:function(t,e,a){},57:function(t,e,a){},58:function(t,e,a){},59:function(t,e,a){},64:function(t,e,a){},65:function(t,e,a){},91:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(0),c=a.n(r),i=a(40),s=a.n(i),l=(a(57),a(21)),o=a(5),u=a(11),d=function(t){var e=Object(r.useState)(null),a=Object(u.a)(e,2),n=a[0],c=a[1],i=Object(r.useState)(!1),s=Object(u.a)(i,2),l=s[0],o=s[1],d=Object(r.useState)(null),j=Object(u.a)(d,2),m=j[0],O=j[1];return Object(r.useEffect)((function(){var e=!1;return o(!0),fetch(t).then((function(t){return t.json()})).then((function(t){e||(c(t.temperatureData),o(!1))})).catch((function(t){O(t),o(!1)})),function(){e=!0}}),[t]),{data:n,loading:l,error:m}},j=(a(58),a(59),function(){return Object(n.jsx)("aside",{className:"left-nav",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{className:"left-nav__item ",children:Object(n.jsx)(l.b,{to:"/current",activeClassName:"active",className:"left-nav-item__link",children:"Current temperature"})}),Object(n.jsx)("li",{className:"left-nav__item",children:Object(n.jsx)(l.b,{to:"/statistics",activeClassName:"active",className:"left-nav-item__link",children:"Statistics"})})]})})}),m=a(97),O=a(95),h=a(96),p=(a(64),function(t){var e=t.children,a=t.cardInARow;return Object(n.jsx)("div",{className:"card card--".concat(a),children:e})});p.defaultProps={children:"",cardInARow:4};var b=p,f=(a(65),function(t){var e=t.data,a=t.error;if(t.isLoading||!e&&!a)return Object(n.jsx)(m.a,{active:!0,withOverlay:!0});if(a)return"error: ".concat(a);var r=e[0];return Object(n.jsx)("div",{className:"page-inner",children:Object(n.jsxs)(O.a,{children:[Object(n.jsx)(h.a,{children:Object(n.jsxs)("small",{className:"timestamp",children:["Last measurement at:"," ","".concat(new Date(+r.timestamp).toLocaleDateString(),", ").concat(new Date(+r.timestamp).toLocaleTimeString())]})}),Object(n.jsxs)(h.a,{children:[Object(n.jsxs)(b,{children:[Object(n.jsx)("h2",{children:"Current temperature"}),Object(n.jsxs)("p",{className:"centered",children:[r.temp," \xb0C"]})]}),Object(n.jsxs)(b,{children:[Object(n.jsx)("h2",{children:"Current humidity"}),Object(n.jsxs)("p",{className:"centered",children:[r.humidity,"%"]})]})]})]})})});f.defaultProps={data:null,error:null,isLoading:!1};var x=f,v=a(10),g=a(42),y={title:"History",axes:{bottom:{title:"Time",mapsTo:"date",scaleType:"time"},left:{mapsTo:"value",scaleType:"linear",includeZero:!1}},curve:"curveNatural",height:"20rem",legend:{enabled:!1}},N=Object(v.a)(Object(v.a)({},JSON.parse(JSON.stringify(y))),{},{getFillColor:function(){return"#005d5d"},getStrokeColor:function(){return"#003939"}});N.axes.left.domain=[20,30];var S=Object(v.a)(Object(v.a)({},JSON.parse(JSON.stringify(y))),{},{getFillColor:function(){return"#1192e8"},getStrokeColor:function(){return"#0f7dc7"}});S.axes.left.domain=[20,40];var C=function(t){var e=t.data,a=t.options;return Object(n.jsx)(g.LineChart,{data:e,options:a})};C.defaultProps={data:[],options:N};var J=C,w=function(t){return(null===t||void 0===t?void 0:t.reduce((function(t,e){return t+e}),0))/(null===t||void 0===t?void 0:t.length)||0},L=function(t){return[t.map((function(t){return{value:+t.temp,group:"Temperature",date:new Date(+t.timestamp).toISOString()}})),t.map((function(t){return{value:+t.humidity,group:"Humidity",date:new Date(+t.timestamp).toISOString()}}))]},I=(a(39),function(t,e){if(!t||0===t.length)return t;if(e>+t[0].timestamp||!e)return[t[0],0];if(e<+t[t.length-1].timestamp)return[t[t.length-1],t.length-1];for(var a=+t[0].timestamp,n=0;a>e;)a=+t[n+=1].timestamp;return[t[n],n]}),M=function(t,e,a){if(!t||0===t.length)return t;var n=a||+t[0].timestamp,r=I(t,a),c=Object(u.a)(r,2),i=(c[0],c[1]),s=I(t,n-6e4*e),l=Object(u.a)(s,2),o=(l[0],l[1]);return t.slice(i,o+1)},T=a(23),F=function(t){var e=Math.max.apply(Math,Object(T.a)(t.map((function(t){return t.temp}))))+.25,a=Math.min.apply(Math,Object(T.a)(t.map((function(t){return t.temp}))))-.25,n=Math.max.apply(Math,Object(T.a)(t.map((function(t){return t.humidity}))))+.5;return[a,e,Math.min.apply(Math,Object(T.a)(t.map((function(t){return t.humidity}))))-.5,n]},_=function(t){var e=t.data,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1440;if(!t||!(t instanceof Array))return t;for(var a=[],n=0;n<Math.ceil(t.length/e);n++){var r=t.slice(n*e,n*e+e),c={temp:w(r.map((function(t){return+t.temp}))).toFixed(1),humidity:w(r.map((function(t){return+t.humidity}))).toFixed(1),timestamp:w(r.map((function(t){return+t.timestamp}))).toFixed()};c&&a.push(c)}return a}(M(e,1440),60),r=L(a),c=Object(u.a)(r,2),i=c[0],s=c[1],l=F(a),o=Object(u.a)(l,4),d=o[0],j=o[1],m=o[2],O=o[3],h=JSON.parse(JSON.stringify(N));h.axes.left.domain=[+d,+j];var p=JSON.parse(JSON.stringify(S));return p.axes.left.domain=[+m,+O],Object(n.jsxs)("div",{className:"last-day-graphs graphs",children:[Object(n.jsx)(b,{cardInARow:2,children:Object(n.jsx)(J,{data:i,options:Object(v.a)(Object(v.a)({},h),{},{title:"Last day temperatures"})})}),Object(n.jsx)(b,{cardInARow:2,children:Object(n.jsx)(J,{data:s,options:Object(v.a)(Object(v.a)({},p),{},{title:"Last day humidity"})})})]})},A=function(t){var e=t.data,a=M(e,30),r=L(a),c=Object(u.a)(r,2),i=c[0],s=c[1],l=F(a),o=Object(u.a)(l,4),d=o[0],j=o[1],m=o[2],O=o[3],h=JSON.parse(JSON.stringify(N));h.axes.left.domain=[+d,+j];var p=JSON.parse(JSON.stringify(S));return p.axes.left.domain=[+m,+O],Object(n.jsxs)("div",{className:"last-hour-graphs graphs",children:[Object(n.jsx)(b,{cardInARow:2,children:Object(n.jsx)(J,{data:i,options:Object(v.a)(Object(v.a)({},h),{},{title:"Last 30 min temperatures"})})}),Object(n.jsx)(b,{cardInARow:2,children:Object(n.jsx)(J,{data:s,options:Object(v.a)(Object(v.a)({},p),{},{title:"Last 30 min humidity"})})})]})},D=function(t){var e=t.data;return e&&e.length?Object(n.jsxs)("main",{children:[Object(n.jsx)(_,{data:e}),Object(n.jsx)(A,{data:e})]}):Object(n.jsx)("div",{children:"todo: chart placeholder"})};D.defaultProps={data:null};var k=D,P=function(){return Object(n.jsx)(o.a,{to:"/current"})},R=function(){var t=d("http://localhost:3000/api/getTemps"),e=t.data,a=t.loading,r=t.error;return Object(n.jsxs)(l.a,{basename:"/temperature-client",children:[Object(n.jsx)(j,{}),Object(n.jsx)("div",{className:"app",children:Object(n.jsxs)(o.d,{children:[Object(n.jsx)(o.b,{path:"/statistics",children:Object(n.jsx)(k,{data:e})}),Object(n.jsx)(o.b,{path:"/current",children:Object(n.jsx)(x,{data:e,error:r,isLoading:a})}),Object(n.jsx)(o.b,{path:"/",children:Object(n.jsx)(P,{})})]})})]})},B=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))};s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(R,{})}),document.getElementById("root")),B()}},[[91,1,2]]]);
//# sourceMappingURL=main.41f2059e.chunk.js.map