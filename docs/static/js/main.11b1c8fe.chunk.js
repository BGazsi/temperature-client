(this["webpackJsonptemperature-client"]=this["webpackJsonptemperature-client"]||[]).push([[0],{36:function(t,e,a){},54:function(t,e,a){},55:function(t,e,a){},56:function(t,e,a){},61:function(t,e,a){},62:function(t,e,a){},89:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(0),c=a.n(r),i=a(37),s=a.n(i),o=(a(54),a(21)),l=a(5),u=a(15),d=function(t){var e=Object(r.useState)(null),a=Object(u.a)(e,2),n=a[0],c=a[1],i=Object(r.useState)(!1),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(null),j=Object(u.a)(d,2),h=j[0],m=j[1];return Object(r.useEffect)((function(){var e=!1;return l(!0),fetch(t).then((function(t){return t.json()})).then((function(t){e||(c(t.temperatureData),l(!1))})).catch((function(t){m(t),l(!1)})),function(){e=!0}}),[t]),{data:n,loading:o,error:h}},j=(a(55),a(56),function(){return Object(n.jsx)("aside",{className:"left-nav",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{className:"left-nav__item",children:Object(n.jsx)(o.b,{to:"/",children:"Current temperature"})}),Object(n.jsx)("li",{className:"left-nav__item",children:Object(n.jsx)(o.b,{to:"/statistics",children:"Statistics"})})]})})}),h=a(95),m=a(93),b=a(94),O=(a(61),function(t){var e=t.children,a=t.cardInARow;return Object(n.jsx)("div",{className:"card card--".concat(a),children:e})});O.defaultProps={children:"",cardInARow:4};var p=O,f=(a(62),function(t){var e=t.data,a=t.error;if(t.isLoading||!e&&!a)return Object(n.jsx)(h.a,{active:!0,withOverlay:!0});if(a)return"error: ".concat(a);var r=e[0];return Object(n.jsx)("div",{className:"page-inner",children:Object(n.jsxs)(m.a,{children:[Object(n.jsx)(b.a,{children:Object(n.jsxs)("small",{className:"timestamp",children:["Last measurement at:"," ","".concat(new Date(+r.timestamp).toLocaleDateString(),", ").concat(new Date(+r.timestamp).toLocaleTimeString())]})}),Object(n.jsxs)(b.a,{children:[Object(n.jsxs)(p,{children:[Object(n.jsx)("h2",{children:"Current temperature"}),Object(n.jsxs)("p",{className:"centered",children:[r.temp," \xb0C"]})]}),Object(n.jsxs)(p,{children:[Object(n.jsx)("h2",{children:"Current humidity"}),Object(n.jsxs)("p",{className:"centered",children:[r.humidity,"%"]})]})]})]})})});f.defaultProps={data:null,error:null,isLoading:!1};var x=f,v=(a(63),a(8)),g=a(39),y={title:"History",axes:{bottom:{title:"Time",mapsTo:"date",scaleType:"time"},left:{mapsTo:"value",scaleType:"linear",includeZero:!1}},curve:"curveNatural",height:"20rem",legend:{enabled:!1}},S=Object(v.a)(Object(v.a)({},JSON.parse(JSON.stringify(y))),{},{getFillColor:function(){return"#005d5d"},getStrokeColor:function(){return"#003939"}});S.axes.left.domain=[10,30];var N=Object(v.a)(Object(v.a)({},JSON.parse(JSON.stringify(y))),{},{getFillColor:function(){return"#1192e8"},getStrokeColor:function(){return"#0f7dc7"}});N.axes.left.domain=[0,100];var w=function(t){var e=t.data,a=t.options;return Object(n.jsx)(g.AreaChart,{data:e,options:a})};w.defaultProps={data:[],options:S};var L=w,C=function(t){return(null===t||void 0===t?void 0:t.reduce((function(t,e){return t+e}),0))/(null===t||void 0===t?void 0:t.length)||0},I=function(t){return[t.map((function(t){return{value:+t.temp,group:"Temperature",date:new Date(+t.timestamp).toISOString()}})),t.map((function(t){return{value:+t.humidity,group:"Humidity",date:new Date(+t.timestamp).toISOString()}}))]},T=(a(36),function(t,e){if(!t||0===t.length)return t;if(e>+t[0].timestamp||!e)return[t[0],0];if(e<+t[t.length-1].timestamp)return[t[t.length-1],t.length-1];for(var a=+t[0].timestamp,n=0;a>e;)a=+t[n+=1].timestamp;return[t[n],n]}),F=function(t,e,a){if(!t||0===t.length)return t;var n=a||+t[0].timestamp,r=T(t,a),c=Object(u.a)(r,2),i=(c[0],c[1]),s=T(t,n-6e4*e),o=Object(u.a)(s,2),l=(o[0],o[1]);return t.slice(i,l+1)},A=function(t){var e=t.data,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1440;if(!t||!(t instanceof Array))return t;for(var a=[],n=0;n<Math.ceil(t.length/e);n++){var r=t.slice(n*e,n*e+e),c={temp:C(r.map((function(t){return+t.temp}))).toFixed(1),humidity:C(r.map((function(t){return+t.humidity}))).toFixed(1),timestamp:C(r.map((function(t){return+t.timestamp}))).toFixed()};c&&a.push(c)}return a}(F(e,1440),60),r=I(a),c=Object(u.a)(r,2),i=c[0],s=c[1];return console.log(Object(v.a)(Object(v.a)({},S),{},{title:"Last day temperatures"})),Object(n.jsxs)("div",{className:"last-day-graphs graphs",children:[Object(n.jsx)(p,{cardInARow:2,children:Object(n.jsx)(L,{data:i,options:Object(v.a)(Object(v.a)({},S),{},{title:"Last day temperatures"})})}),Object(n.jsx)(p,{cardInARow:2,children:Object(n.jsx)(L,{data:s,options:Object(v.a)(Object(v.a)({},N),{},{title:"Last day humidity"})})})]})},D=function(t){var e=t.data,a=F(e,60),r=I(a),c=Object(u.a)(r,2),i=c[0],s=c[1];return Object(n.jsxs)("div",{className:"last-hour-graphs graphs",children:[Object(n.jsx)(p,{cardInARow:2,children:Object(n.jsx)(L,{data:i,options:Object(v.a)(Object(v.a)({},S),{},{title:"Last hour temperatures"})})}),Object(n.jsx)(p,{cardInARow:2,children:Object(n.jsx)(L,{data:s,options:Object(v.a)(Object(v.a)({},N),{},{title:"Last hour humidity"})})})]})},J=function(t){var e=t.data;return e&&e.length?Object(n.jsxs)("main",{children:[Object(n.jsx)(A,{data:e}),Object(n.jsx)(D,{data:e})]}):Object(n.jsx)("div",{children:"todo: chart placeholder"})};J.defaultProps={data:null};var P=J,R=function(){var t=d("http://localhost:3000/api/getTemps"),e=t.data,a=t.loading,r=t.error;return Object(n.jsxs)(o.a,{children:[Object(n.jsx)(j,{}),Object(n.jsx)("div",{className:"app",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/statistics",children:Object(n.jsx)(P,{data:e})}),Object(n.jsx)(l.a,{path:"/",children:Object(n.jsx)(x,{data:e,error:r,isLoading:a})})]})})]})},k=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,96)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))};s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(R,{})}),document.getElementById("root")),k()}},[[89,1,2]]]);
//# sourceMappingURL=main.11b1c8fe.chunk.js.map